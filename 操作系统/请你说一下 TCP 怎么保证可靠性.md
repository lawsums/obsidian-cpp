
DECK: 面试题

## 请你说一下 TCP 怎么保证可靠性


## 标准答案
Tcp 通过
1. 序列号/确认应答/超时重传保证可靠性
	数据到达接收方, 接收方需要发出一个确认应答 (ack), 表示已经收到该数据段, 并且确认序号说明了它下一次需要接收的数据序列号. 如果发送方迟迟未收到确认应答, 那么可能是发送的数据丢失, 也可能是确认应答丢失, 这时发送方在等待一定时间后会进行重传. 这个时间一般是**两倍的 RTT**
2. 窗口控制与快速重传
	Tcp 会利用窗口控制来提高传输速度, 意思是无需等待确认而可以继续发送数据的**最大值**, 如果不使用窗口控制的话, 每一个没收到确认应答的数据都要重发.
	使用窗口控制，如果数据段 1001-2000 丢失，后面数据每次传输，**确认应答都会不停地发送序号为 1001 的应答**，表示我要接收 1001 开始的数据，**发送端如果收到 3 次相同应答，就会立刻进行重发**；但还有种情况有可能是数据都收到了，但是**有的应答丢失了**，这种情况不会进行重发，因为发送端知道，如果是数据段丢失，接收端不会放过它的，会疯狂向它提醒......
3. 拥塞控制
	慢启动: 定义拥塞窗口, 一开始将该窗口大小设置为 1, 之后每次收到确认应答将拥塞窗口大小\*2
	拥塞避免: 设置慢启动阈值, 一般开始都设为 65536. 拥塞避免是指当拥塞窗口大小达到这个阈值, 拥塞窗口的值不再指数上升，而是加法增加（每次确认应答/每个 rtt，拥塞窗口大小+1），以此来避免拥塞。
	

## 我的答案

Tcp 通过 ... 保证可靠性


END
<!--ID: 1766545714614-->
