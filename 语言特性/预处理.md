
预处理做什么
1. 处理# [[include]] 的内容, 将引用的头文件都插入进来, 
2. 处理[[宏定义]] 将所有 define 的字符串进行**直接替换**, 比如说# define MAX_LEN 100就是将所有 MAX_LEN 替换为 100 这个字符串, 非常直接, 起到[[魔术常量]], 简单函数, [[宏函数]]等作用
3. 处理 # if/# elif/# else/# endif, 也是直接进行预处理器件的条件编译, 作用是从预处理层面上避免对头文件的重复引用, 以及可以从真正对代码进行"注释"
---

你对 C 语言预处理的解析很准确，这三个是预处理阶段的核心工作：

1. **处理 # include ：相当于"文本插入"，把被包含的头文件内容完整嵌入到当前文件中，解决代码复用和声明共享问题。

2. **处理 # define ：实现简单的文本替换机制，既可以定义常量（如 MAX_LEN），也能通过带参数的宏实现类似函数的功能，但本质是字符串替换，没有函数调用的开销和类型检查。

3. **处理条件编译（ # if等 ）**：在预处理阶段就决定代码的取舍，主要用途包括：
   - 通过 # ifndef等防止头文件被重复包含
   - 根据不同编译环境（如操作系统）选择执行不同代码块
   - 临时"注释"掉不需要编译的代码段（比//或/ ** / 更灵活）

这些工作都在代码实际编译前完成，生成经过预处理的中间代码，再进入编译阶段。预处理本质是文本处理，不涉及语法分析和语义检查。